<script>
    const firebaseConfig = {
      apiKey: "AIzaSyB_IgmKCUS35ooOzzEYaQuidxgrXCHGGtU",
      authDomain: "soudfa-9a558.firebaseapp.com",
      databaseURL: "https://soudfa-9a558-default-rtdb.firebaseio.com",
      projectId: "soudfa-9a558",
      storageBucket: "soudfa-9a558.appspot.com",
      messagingSenderId: "889312889458",
      appId: "1:889312889458:web:2f7086b73e5bda0328e01a"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const container = document.getElementById('codesContainer');

    db.ref("codes").orderByKey().once("value", (snapshot) => {
      const data = snapshot.val();
      const keys = Object.keys(data).reverse(); // حتى نعرض من الأحدث

      keys.forEach((key) => {
        const item = data[key];

        const card = document.createElement("div");
        card.className = "card";

        const preview = document.createElement("div");
        preview.className = "preview";
        preview.innerHTML = item.previewHTML;

        const btn = document.createElement("a");
        btn.href = copy.html?id=${key};
        btn.className = "btn";
        btn.innerText = "عرض الكود";

        card.appendChild(preview);
        card.appendChild(btn);

        if (item.isNew) {
          const badge = document.createElement("div");
          badge.className = "badge";
          badge.innerText = "NEW";
          card.appendChild(badge);
        }

        container.appendChild(card);
      });
    });
  </script>
</body>
</html>
